# AutomationJS

## 注意

此脚本仅限个人娱乐用途，严禁用于扰乱正常直播秩序。  
使用时请遵守相关平台的规定和社区规范。

---

## 使用脚本说明

以下是一个用于 `小破站` 的脚本，用户可以选择特定的游戏模式，并定时发送聊天消息到直播间。

### 功能概述

1. **选择游戏模式**：支持两种模式：
   - 猫猫养成
   - 修仙
2. **定时发送消息**：根据选择的模式，每隔一段时间发送固定消息。
3. **自动化操作**：确保脚本只运行一次，避免重复操作。

### 注意事项

1. **适用范围**：仅适用于小破站直播页面。
2. **使用间隔**：默认每 3 分钟发送一条消息。
3. **合法性**：请确保您的操作符合平台规则，避免频繁操作导致封禁。

---

## 使用步骤(方法一)

### 1. 打开浏览器控制台

1. 在直播页面按下 `F12` 或 `Ctrl + Shift + I` 打开开发者工具。
2. 点击 **Console（控制台）** 选项卡。

### 2. 粘贴并运行脚本

将 auto.js 完整复制并粘贴到控制台中，然后按下回车键执行脚本。

## 使用步骤(方法二)

使用书签模式：

```javascript
javascript:(function(){const s=document.createElement('script');s.src='https://api.allorigins.win/raw?url=%27+encodeURIComponent(%27https://raw.githubusercontent.com/De3trvctions/AutomationJS/refs/heads/main/auto.js%27);document.body.append(s);})();
```

### 3. 选择游戏模式

1. 运行脚本后，屏幕中央会出现一个模态框。
2. 在下拉框中选择游戏模式：
   - **猫猫养成**：将发送消息 "喵"。
   - **修仙**：将发送消息 "修炼"。
3. 点击 **确认** 按钮，脚本开始定时发送消息。

### 4. 退出脚本

- 如果需要停止脚本：
  1. 刷新页面。
  2. 或手动清除浏览器缓存中的 `window.scriptRunning` 变量。

---

## 脚本的关键部分

1. **模态框创建**：动态创建一个包含下拉菜单 (`<select>`) 和确认按钮 (`<button>`) 的模态框，点击确认按钮后，模态框消失，脚本继续执行。
2. **游戏特定消息发送**：根据选择的游戏模式，脚本发送对应的预定义消息：
   - **选项 1**：发送“喵”。
   - **选项 2**：发送“修炼”。
3. **自动消息发送逻辑**：脚本与直播页面的聊天输入框和发送按钮交互，默认每 3 分钟发送一次消息（间隔时间可通过修改 `intervalMinutes` 变量自定义）。

---

## 脚本备注事项

1. **登录和页面要求**：确保已登录并位于 **小破站直播页面**。
2. **防止重复运行**：脚本已运行时再次尝试运行会显示警告：

   ```text
   脚本已运行，请勿重复运行！
   ```

3. **页面错误**：如果尝试在非直播页面运行脚本，会显示以下错误：

   ```text
   当前页面不是直播页面或未登录！
   ```

---

## 自定义

### 修改发送间隔

更新 `intervalMinutes` 的值以调整消息发送间隔时间：

```javascript
const intervalMinutes = 5 // 修改为每 5 分钟发送一次消息
```

### 添加更多游戏模式

修改 `options` 和 `optionsValue` 数组：

```javascript
const options = ['猫猫养成', '修仙', '新游戏']
const optionsValue = [1, 2, 3]
```

### 更新消息逻辑

在 `sendMessage` 函数中，根据选择的模式发送相应的消息：

```javascript
switch (parseInt(select.value, 10)) {
	case 1:
		msg = '喵'
		break
	case 2:
		msg = '修炼'
		break
	case 3:
		msg = '新游戏消息'
		break
}
```

---

## 如何停止脚本

### 1. 刷新页面

最简单的停止方法是刷新当前页面。刷新后，脚本停止运行，所有自动发送的消息将会中止。

### 2. 通过控制台手动停止

1. **打开控制台**：按下 `F12` 或右键点击页面并选择“检查”，切换到 **Console（控制台）** 标签页。
2. **停止脚本执行**：在控制台中输入以下命令，这将停止脚本的运行，防止继续发送消息。

   ```javascript
   window.scriptRunning = false
   ```

3. 如果你**重新加载页面**或**再次执行脚本**，脚本将会重新启动。通过控制台停止脚本后，脚本**不会**自动恢复，需要手动重新运行脚本。
